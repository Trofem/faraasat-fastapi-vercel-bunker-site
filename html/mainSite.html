<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Генератор бункер!</title>
    <style>
        body {
            background-color: #bcd4ff;

        }
        .disabled {
        opacity: 0.5;
        cursor: not-allowed;
        }
        button:active, button:focus {
        border-color: white;
        box-shadow: 0 0 5px white; /* Optional: Add a subtle shadow to indicate selection */
        }
        button:active {
        border-color: grey;
        }
    </style>
</head>
<body>
    <!-- Начальный текст -->
    <h2>Сайт по созданию персонажей для игры в бункер</h2>

    <p>На данном сайте, достаточно <b>нажать</b> на кнопку ниже и вы сможете получить сгенерированного персонажа.</p>
    <h2>Кнопка</h2>

    <!-- Кнопка генерации -->
    <button type="button" name="createCharacterButton" style="background: linear-gradient(to right, #1c59ff, #a5c4ff); 
    color: white;  padding: 5px 15px; border-radius: 50px;" onclick="generate('/api/character')">
        
        Создать персонажа (случайного)
    </button>
    <!-- Кнопка генерации -->
    <button type="button" name="createCharacterButton" style="background: linear-gradient(to right, #1c59ff, #a5c4ff); 
    color: white;  padding: 10px 30px; border-radius: 50px;" onclick="generate('/api/bunker')">
        
        Создать характеристики бункера (случайного)
    </button>
    <!-- Результат -->
    <h2>Результат</h2>
    <div id="characterContainer"></div>




    <!-- Кнопка очистка текста -->
    <button type="button" name="clearCharacterButton" style="background: linear-gradient(to right, #ff1c1c, #ffa5a5); 
        color: white;  padding: 5px 15px; border-radius: 25px;" onclick="clearCharacter()" disabled>
    Очистить текст
	</button>
    <!-- Авторы -->
    <h2 style="color:rgb(40, 40, 250);">Создатель:</h2>
    <a style="color:rgb(57, 57, 238);" href="https://github.com/Trofem/">Trofem</a>

    <!-- пост-скриптум (: -->
    <script>
        //var response_directory = '/api/character';
        var text_container_name = "characterContainer";
        function start(){
		
			DisableButtonState(true);
		}
        async function generate(response_directory) {
            try {
                const response = await fetch(response_directory);
                if (!response.ok) {
                    throw new Error(`
                    <body>
                    <p><ins>Ошибка сети при получении данных.</ins></p>
                    <p><ins>Сообщите создателю (response ${response_directory} is not ok).</ins></p>
                    </body>
                    `);
                }
                const characterHtml = await response.text();
                characterText(characterHtml);
            } catch (error) {
                characterText(`Произошла ошибка: ${error.message}`);
            }
            DisableButtonState(false);
        }
        
        async function clearCharacter(){
            characterText("");
            DisableButtonState(true);
        }
        async function characterText(value) {
            document.getElementById(text_container_name).innerHTML = value;
            if (value == ""){
                DisableButtonState(true);
            }
            else{
                DisableButtonState(false);
            }
        }
        function DisableButtonState(state){ //state - bool of state
            var clearButton = document.querySelector('button[name="clearCharacterButton"]');
                
            if (state == true) {
                clearButton.disabled = true;
                clearButton.classList.add('disabled');
            } else {
                clearButton.disabled = false;
                clearButton.classList.remove('disabled');
            }
        }
        
        window.onload = start;
    </script>
</body>
</html>
